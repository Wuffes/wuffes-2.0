{{ 'component-blog-nav.css' | asset_url | stylesheet_tag }}

<div class="blog-nav section-{{ section.id }}-padding color-{{ section.settings.color_scheme }} {% if section.settings.show_border %} blog-nav--border{% endif %}">
  <nav
    role="nav"
    class="page-width blog-nav--wrap"
  >
    {% if section.settings.heading != blank %}
      <input class="blog-nav--input" id="nav-input-trigger" type="checkbox">
      <label for="nav-input-trigger" href="#" class="blog-nav--heading">
        {{- section.settings.heading -}}
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="5 7 10 6"
        >
          <path fill-rule="evenodd" clip-rule="evenodd" d="M5.23017 7.20938C5.52875 6.92228 6.00353 6.93159 6.29063 7.23017L10 11.1679L13.7094 7.23017C13.9965 6.93159 14.4713 6.92228 14.7698 7.20938C15.0684 7.49647 15.0777 7.97125 14.7906 8.26983L10.5406 12.7698C10.3992 12.9169 10.204 13 10 13C9.79599 13 9.60078 12.9169 9.45938 12.7698L5.20938 8.26983C4.92228 7.97125 4.93159 7.49647 5.23017 7.20938Z" fill="currentColor"></path>
        </svg>
      </label>
    {%- else -%}
      <a href="#" class="blog-nav--heading">
        {{- section.settings.link.title -}}
      </a>
    {%- endif -%}
    <ul class="blog-nav--lists list-unstyled" closed>
      {% liquid
        if template.name == 'article'
          assign article_tag = article.metafields.article.tag | downcase

          if article_tag == ''
            for tag in article.tags
              assign current_tag = tag | downcase
              if current_tag == 'joint health' or current_tag == 'skin' or current_tag == 'nutrition' or current_tag == 'exercise' or current_tag == 'pet tips'
                assign article_tag = current_tag | handleize
                break
              endif
            endfor
          endif
          assign article_tag_handleize = article_tag | handleize
        endif
      %}

      {%- for link in section.settings.link.links -%}
        <li class="blog-nav--list">
          <a
            href="{{ link.url }}"
            class="blog-nav--list-link {% if link.current or template.name == 'article' and article_tag_handleize == link.handle %} blog-nav--list-link-active{% endif %}"
          >
            {{- link.title -}}
          </a>
        </li>
      {%- endfor -%}
    </ul>
  </nav>
</div>

{% schema %}
{
  "name": "Blog nav",
  "tag": "section",
  "enabled_on": {
    "templates": ["blog", "article"]
  },
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:sections.all.colors.label",
      "default": "scheme-1"
    },
    {
      "type": "inline_richtext",
      "id": "heading",
      "label": "Heading",
      "default": "Blog menu"
    },
    {
      "type": "link_list",
      "id": "link",
      "label": "Menu"
    },
    {
      "type": "header",
      "content": "t:sections.all.padding.section_padding_heading"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_top",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_bottom",
      "default": 36
    },
    {
      "type": "checkbox",
      "id": "show_border",
      "default": true,
      "label": "Show border"
    }
  ],
  "presets": [
    {
      "name": "Blog nav"
    }
  ]
}
{% endschema %}
